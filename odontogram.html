<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Odontogram</title>
<style>
  :root{
    --tooth-w: 58px;      /* lebar kotak gigi */
    --tooth-h: 58px;      /* tinggi kotak gigi */
    --gap-x:   10px;
    --gap-row: 40px;
    --gap-mid: 0px;
    --font:    14px;      /* ukuran angka label */
    --label-offset: 14px; /* jarak label dari kotak gigi */
    --canvas-max: 1120px;
  }

  body{font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
       background:#fff; margin:0; padding:28px;}
  .odo-wrap{ max-width:var(--canvas-max); margin:0 auto; }

  .row{ display:flex; justify-content:center; gap:var(--gap-x); margin-bottom:var(--gap-row); }
  .child-block{ display:flex; flex-direction:column; align-items:center; gap:var(--gap-mid); }

  .tooth{ width:var(--tooth-w); height:var(--tooth-h); position:relative; cursor:pointer; }
  .tooth svg{ width:100%; height:100%; display:block; }

  /* ====== LABEL NOMOR (center & bold) ====== */
  .idx{
    position:absolute; pointer-events:none;
    font-size:var(--font); color:#111;
    width:100%; left:0; text-align:center; font-weight:700;
    line-height:1;
  }
  .label-top{ top:calc(-1 * var(--label-offset) - var(--font)); }
  .label-bottom{ bottom:calc(-1 * var(--label-offset) - var(--font)); }

  .tooth.active svg *{ stroke:#1f78ff; }

  @media (max-width: 960px){
    :root{ --tooth-w:50px; --tooth-h:50px; --gap-x:8px; --font:11px; }
  }
</style>
</head>
<body>
<div class="odo-wrap" id="odontogram"></div>

<script>
/* ============================================================
   SHAPES (TIDAK DIUBAH)
   - 'posterior' : kotak + 4 garis dari sudut → sudut persegi tengah.
   - 'anterior'  : trapesium tipis + 4 garis dari sudut kotak → sudut trapesium.
   ============================================================ */
function toothSVG(type='posterior'){
  const w=58, h=58, pad=2.2;
  const cx=w/2, cy=h/2;

  if(type==='anterior'){
    const topW=w*0.25, botW=w*0.25, hT=h*0, offsetY=-h*0;
    const yTop=cy-hT/2+offsetY, yBot=cy+hT/2+offsetY;
    const xLtop=cx-topW/2, xRtop=cx+topW/2;
    const xLbot=cx-botW/2, xRbot=cx+botW/2;

    const facets=[
      `M ${pad} ${pad} L ${xLtop} ${yTop}`,
      `M ${w-pad} ${pad} L ${xRtop} ${yTop}`,
      `M ${pad} ${h-pad} L ${xLbot} ${yBot}`,
      `M ${w-pad} ${h-pad} L ${xRbot} ${yBot}`
    ].join(' ');

    return `
      <svg viewBox="0 0 ${w} ${h}" aria-hidden="true">
        <rect x="1" y="1" width="${w-2}" height="${h-2}" fill="none" stroke="#111" stroke-width="2"/>
        <path d="${facets}" fill="none" stroke="#111" stroke-width="1.8"/>
        <path d="M ${xLtop} ${yTop} L ${xRtop} ${yTop} L ${xRbot} ${yBot} L ${xLbot} ${yBot} Z"
              fill="none" stroke="#111" stroke-width="2"/>
      </svg>`;
  }

  const rw=w*0.45, rh=h*0.45;
  const x1=cx-rw/2, x2=cx+rw/2;
  const y1=cy-rh/2, y2=cy+rh/2;

  const lines=[
    `M ${pad} ${pad} L ${x1} ${y1}`,
    `M ${w-pad} ${pad} L ${x2} ${y1}`,
    `M ${pad} ${h-pad} L ${x1} ${y2}`,
    `M ${w-pad} ${h-pad} L ${x2} ${y2}`
  ].join(' ');

  return `
    <svg viewBox="0 0 ${w} ${h}" aria-hidden="true">
      <rect x="1" y="1" width="${w-2}" height="${h-2}" fill="none" stroke="#111" stroke-width="2"/>
      <path d="${lines}" fill="none" stroke="#111" stroke-width="1.6"/>
      <rect x="${x1}" y="${y1}" width="${rw}" height="${rh}"
            fill="none" stroke="#111" stroke-width="1.8"/>
    </svg>`;
}

/* ==================== Data baris ==================== */
const topPermanent    = [18,17,16,15,14,13,12,11,21,22,23,24,25,26,27,28];
const childUpper      = [55,54,53,52,51,61,62,63,64,65];
const childLower      = [85,84,83,82,81,71,72,73,74,75];
const bottomPermanent = [48,47,46,45,44,43,42,41,31,32,33,34,35,36,37,38];

/* ===== Mapping anterior ===== */
const anteriorSet = new Set([
  13,12,11,21,22,23, 33,32,31,41,42,43, 53,52,51,61,62,63, 83,82,81,71,72,73
]);
const shapeOf = n => (anteriorSet.has(n) ? 'anterior' : 'posterior');

/* ==================== Render Helper ==================== */
const root = document.getElementById('odontogram');

function makeRow(arr, labelPos){
  const row = document.createElement('div'); row.className='row';
  arr.forEach(n=>{
    const t = document.createElement('div'); t.className='tooth'; t.dataset.tooth=n;
    t.innerHTML = toothSVG(shapeOf(n));
    const lb = document.createElement('div'); lb.className = 'idx ' + (labelPos==='top' ? 'label-top' : 'label-bottom');
    lb.textContent = n;
    t.appendChild(lb);
    t.addEventListener('click', ()=> t.classList.toggle('active'));
    row.appendChild(t);
  });
  return row;
}

/* ==================== Render Layout ==================== */
root.appendChild(makeRow(topPermanent, 'top'));
const mid = document.createElement('div'); mid.className='child-block';
mid.appendChild(makeRow(childUpper, 'top'));
mid.appendChild(makeRow(childLower, 'bottom'));
root.appendChild(mid);
root.appendChild(makeRow(bottomPermanent, 'bottom'));
</script>
</body>
</html>
